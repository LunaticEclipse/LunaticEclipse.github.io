<!DOCTYPE html>
<html>

<head>

	<style>

		body{
			background-color: #000435;
		}

	</style>

</head>


<body>

<canvas id="danmaku" width="1450" height="800" style="border:0px solid #000000;"></canvas>

<script type="text/javascript" src="mathFunctions.js"></script>
<script type="text/javascript" src="danmaku.js"></script>



<script>

	var x = cx;
	var y = cy+300;
	toggle = true;
	touhou = true;


	function spray(i){
		addBullet(count-i, 50, 3, 0, 3, bullets[count-i].angle, pi/600*(2*(i%2)-1), bullets[count-1].color)
		addBullet(count-i, 50, 3, 0, 3, bullets[count-i].angle+pi/6, pi/600*(2*(i%2)-1), bullets[count-1].color)
		addBullet(count-i, 50, 3, 0, 3, bullets[count-i].angle-pi/6, pi/600*(2*(i%2)-1), bullets[count-1].color)
		addBullet(count-i, 50, 3, 0, 3, bullets[count-i].angle+pi/12, pi/600*(2*(i%2)-1), bullets[count-1].color)
		addBullet(count-i, 50, 3, 0, 3, bullets[count-i].angle-pi/12, pi/600*(2*(i%2)-1), bullets[count-1].color)
		deleteBullet(count-i, 50)

	}


	function pattern(){

		if(!(t%15)){

			//shootRing(cx,cy-100, -3, 0, 32, 0, "#d80")
			shootRing(cx,cy-100, -3, t/50, 8, 100, "#d80")

			for(let i = 1; i<=32; i++){
				spray(i)
			}



		/*
			shoot(cx, cy-100, -3, pi/2, "#c00")
			spray()

			shoot(cx, cy-100, -3, pi/2+pi/6, "#c00")
			spray()

			shoot(cx, cy-100, -3, pi/2-pi/6, "#c00")
			spray()

			shoot(cx, cy-100, -3, pi/2+pi/12, "#c00")
			spray()

			shoot(cx, cy-100, -3, pi/2-pi/12, "#c00")
			spray()

			shoot(cx, cy-100, -3, pi/2+pi/4, "#c00")
			spray()

			shoot(cx, cy-100, -3, pi/2-pi/4, "#c00")
			spray()

			shoot(cx, cy-100, -3, pi/2+pi/4, "#c00")
			spray()

			shoot(cx, cy-100, -3, pi/6, "#00c")
			spray()

			shoot(cx, cy-100, -3, pi - pi/6, "#00c")
			spray()
			*/


		}

	}



	function mainLoop(){
		pattern();
		WASD();
		draw();
		
		t++;
	}
	setInterval(mainLoop, 10);	

</script>



</body>
</html>
