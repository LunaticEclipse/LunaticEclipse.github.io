<!DOCTYPE html>
<html>

<head>

	<style>

		body{
			background-color: #000435;
		}

	</style>

</head>


<body>

<canvas id="danmaku" width="1450" height="800" style="border:0px solid #000000;"></canvas>


<p id="1"></p>

<script type="text/javascript" src="mathFunctions.js"></script>
<script type="text/javascript" src="danmaku.js"></script>



<script>

	var x = cx;
	var y = cy+300;
	toggle = true;

	
	var randX = cx;
	var randY = cy-150;

	var sx = cx;
	var sy = cy-150;

	function pattern(){

		for(let i = 0; i<count; i++){
			bullets[i].angle -= pi/900
		}

		if(t%750 == 749){
			randX = Math.random()*750+350;
			randY = Math.random()*250+50;
		}

		if(t%10 == 0){
			 
			 
			
			if(abs(randX-sx) > 50) sx += (randX-sx)/abs(randX-sx)*15;
			if(abs(randY-sy) > 50) sy += (randY-sy)/abs(randY-sy)*15;

			for(let i = 0; i<7; i++){
				shoot(sx,sy,1.5,t/50 + i*pi/10, "#ffa500")
				shoot(sx,sy,-1.5,t/50 + i*pi/10, "#30d5c8")
				shoot(sx,sy,1.6,t/50 + i*pi/10, "#ffa500")
				shoot(sx,sy,-1.6,t/50 + i*pi/10, "#30d5c8")
				
				//shoot(450*sin(t/1000)+cx,cy-150,-2,t/50 + i*pi/10, "#ffd000")

				for(let j = 1; j<=4; j++){
					//bullets[count-j].size = "large"
				}
			}

/*
			for(let i = 0; i<7; i++){
				shoot(450*sin(t/1000)+cx,cy-150,2,t/50 + i*pi/10, "#ffa500")
				shoot(450*sin(t/1000)+cx,cy-150,-2,t/50 + i*pi/10, "#ffd000")
			}
*/
			
			
		}

	}

	function mainLoop(){
		pattern();
		WASD();
		draw();
		
		t++;
	}
	setInterval(mainLoop, 10);	

</script>



</body>
</html>
