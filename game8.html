<!DOCTYPE html>
<html>
<body>

<canvas id="danmaku" width="1500" height="1000" style="border:0px solid #000000;"></canvas>

<script type="text/javascript" src="mathFunctions.js"></script>
<script type="text/javascript" src="danmaku.js"></script>




<script>

	var x = 500;
	var y = 300;

	var dx = 0;
	var dy = 0;

	function pattern(){
		if(t%4 == 1){
			shoot1(cx, 300, 2, t/15, "#000000")
		}
	}


	function move(){
		x += dx;
		y += dy;
		//add focus mode
	}

	function WASD(){
		window.addEventListener("keydown", function (event) {
	  if (event.defaultPrevented) {
	    return; // Do nothing if the event was already processed
	  }


	  switch (event.key) {
	    case "ArrowDown":
	      dy = 2;
	      break;
	    case "ArrowUp":
	      dy = -2;
	      break;
	    case "ArrowLeft":
	      dx = -2;
	      break;
	    case "ArrowRight":
	      dx = 2;
	      break;
	    default:
	      return; // Quit when this doesn't handle the key event.
	  }

	  // Cancel the default action to avoid it being handled twice
	  event.preventDefault();
		
		}, true);
		// the last option dispatches the event to the listener first,
		// then dispatches event to window



		window.addEventListener("keyup", function (event) {
	  if (event.defaultPrevented) {
	    return; 
	  }

	  switch (event.key) {
	    case "ArrowDown":
	      dy = 0;
	      break;
	    case "ArrowUp":
	      dy = 0;
	      break;
	    case "ArrowLeft":
	      dx = 0;
	      break;
	    case "ArrowRight":
	      dx = 0;
	      break;
	    default:
	      return; // Quit when this doesn't handle the key event.
	  }

	  // Cancel the default action to avoid it being handled twice
	  event.preventDefault();
		
		}, true);



	}


	function mainLoop(){
		pattern();
		move();
		WASD()
		draw();
		t++;
	}
	setInterval(mainLoop, 10);	

</script>